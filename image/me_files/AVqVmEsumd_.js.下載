;/*FB_PKG_DELIM*/

__d("useCometCreateComposerStateFromCommentData_comment.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCometCreateComposerStateFromCommentData_comment",selections:[a,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[b,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[b,{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entity_is_weak_reference",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_markdown_enabled",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometFeedStoryUFICommentAttachments_comment"}],type:"Comment",abstractKey:null}}();e.exports=a}),null);
__d("InsightsCometXAxis.react",["InsightsCometAxis.react","InsightsCometAxisUtils","react","useInsightsCometXScale"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){var b=a.data,e=a.formatter,f=e===void 0?d("InsightsCometAxisUtils").defaultFormatter:e;e=a.interval;e=e===void 0?1:e;var g=a.position;g=g===void 0?"bottom":g;var j=a.multilineLabels;j=j===void 0?!1:j;a=babelHelpers.objectWithoutPropertiesLoose(a,["data","formatter","interval","position","multilineLabels"]);var k=c("useInsightsCometXScale")(b),l=i(function(a,c,d){d=Math.ceil(b.length/d);var e=c*d;e>=b.length?e=b[b.length-1]:e=b[c*d];return e!=null&&e.label!=null?e.label:f(a)},[b,f]);return h.jsx(c("InsightsCometAxis.react"),babelHelpers["extends"]({data:b,formatter:l,multilineLabels:j,orientation:"vertical",position:g,scale:k,ticks:Math.max(0,Math.floor(b.length/e))},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("setFocusOnCometUFIComposerInputState",["FBLogger","Lexical"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.editor;b!=null?b.update(function(){var a=d("Lexical").$getRoot();a.getChildrenSize()!==0&&a.selectEnd()}):c("FBLogger")("UFILexicalComposer").warn("setFocusOnCometUFIComposerInputStateForLexical being used on an editor that does not support Lexical");return a}g["default"]=a}),98);
__d("createCometUFICommentEditComposerLexicalPlugin",["fbt","CometLink.react","CometRow.react","CometRowItem.react","CometUFIComposerPreviewArea.react","Lexical","TetraText.react","mlcFocusSubscription","react","useCometLexicalSubscription"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useEffect,l=b.useMemo;function m(a){return a.attachment&&a.attachment.__type==="ExistingAttachment"?a.attachment:null}function n(a){var b=a.allowCancelEdit,e=a.onFinishEdit,f=a.pluginProps,g=f.composerState,n=f.editor,o=f.execCommand,p=f.setComposerState;f=a.prevAttachmentStyleLists;a=a.shouldShowPremiumAwardGiverPopover;g=m(g);var q=l(function(){return c("mlcFocusSubscription")(n)},[n]);q=c("useCometLexicalSubscription")(q);var r=j(function(){o({__type:"BeforeFinishEdit"}),e()},[o,e]),s=j(function(){p(function(){return{attachment:null}})},[p]);k(function(){n.focus()},[n]);k(function(){return n.registerCommand(d("Lexical").KEY_ESCAPE_COMMAND,function(a){a=a;a.preventDefault();a.stopPropagation();b&&r();return!0},d("Lexical").COMMAND_PRIORITY_LOW)},[n,e,r,b]);f=f!=null&&f.length>0&&f.includes("community_award_attachment");return i.jsxs("div",{className:"xh8yej3",children:[g?i.jsx(c("CometUFIComposerPreviewArea.react"),{isDisabled:f&&a,label:h._("__JHASH__HSFH2uC6RvQ__JHASH__"),onRemove:s,removeAnnouncement:h._("__JHASH__Pf-W96A21oP__JHASH__"),children:i.jsx("div",{className:"x1rg5ohu xvijh9v xhhsvwb x1ty9z65 xgzva0m xh8yej3",children:g.component})}):null,b&&i.jsx(c("CometRow.react"),{paddingHorizontal:0,paddingVertical:4,children:i.jsx(c("CometRowItem.react"),{children:i.jsx(c("TetraText.react"),{type:"meta4",children:q?h._("__JHASH__AfmVeI4Ncbw__JHASH__",[h._param("cancel",i.jsx(c("CometLink.react"),{color:"highlight",onClick:r,children:h._("__JHASH__MA2e8Vc584v__JHASH__")}))]):i.jsx(c("CometLink.react"),{color:"highlight",onClick:r,children:h._("__JHASH__73E60EqVclY__JHASH__")})})})})]})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.allowCancelEdit,c=a.onFinishEdit,d=a.prevAttachmentStyleLists;a=a.shouldShowPremiumAwardGiverPopover;return{above:null,action:null,below:n,id:"edit",inside:null,props:{allowCancelEdit:b,onFinishEdit:c,prevAttachmentStyleLists:d,shouldShowPremiumAwardGiverPopover:a}}}g["default"]=a}),98);
__d("useCometCreateComposerEditorStateFromCommentData",["CometFeedStoryUFICommentAttachments.react","FBLogger","Lexical","UnicodeUtils","cometLexicalTypeToNode","cometUFILexicalCreateEditor","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a,b){return{__type:"ExistingAttachment",component:h.jsx(c("CometFeedStoryUFICommentAttachments.react"),{actorID:b.actorID,comment:a,feedbackSource:b.feedbackSource,storyRenderLocation:b.storyRenderLocation})}}function j(a){c("FBLogger")("UFILexicalComposer").warn("The user tried to edit a comment with an attachment in the %s style but no code exists to convert that back into an attachment on UFI2ComposerState",a);return null}function k(a,b){var c=a.attachments&&a.attachments[0];if(!c||!c.style_list)return null;for(var d of c.style_list)switch(d){case"sticker":case"animated_image_autoplay":case"animated_image_share":case"photo":case"video":case"video_autoplay":case"file_upload":case"image_share":case"facts_in_comments":case"community_award_attachment":return i(a,b);case"COMMENT_MESSAGE_INFO":case"event":case"group":case"music_aggregation":case"share":case"video_share":return null}return j(c.style_list[0])}function a(a,b){var e,f=(e=(e=b.body)==null?void 0:e.text)!=null?e:"",g=(e=b.body)==null?void 0:e.ranges;e=k(b,{actorID:a.actorID,feedbackSource:a.feedbackSource,storyRenderLocation:a.storyRenderLocation});var h=c("cometUFILexicalCreateEditor")();h.update(function(){var a=d("Lexical").$getRoot(),c=b.body;if(c){var e=0;c=a.getFirstChild();var h=d("Lexical").$createParagraphNode();c===null?a.append(h):c.replace(h);if(g){c=l(g);c.forEach(function(a){var b,c,g;b=(b=a.offset)!=null?b:0;if(b>e){var i=b-e;i=d("UnicodeUtils").substr(f,e,i);m(h,i)}i=(i=(i=a.entity)==null?void 0:i.__typename)!=null?i:"Actor";c=(c=a.length)!=null?c:0;var j=d("UnicodeUtils").substr(f,b,c);a=d("cometLexicalTypeToNode").$cometLexicalTypeToNode({id:(g=(g=a.entity)==null?void 0:g.id)!=null?g:"0",isWeak:(g=a.entity_is_weak_reference)!=null?g:!1,text:j,type:i});a!==null&&(h.append(a),a.select());e=b+c})}if(e!==d("UnicodeUtils").strlen(f)){c=d("UnicodeUtils").substr(f,e);m(h,c);a.getChildrenSize()!==0&&a.selectEnd()}}});return{attachment:e,commentAssociatedWithReply:null,commentID:b.id,editor:h,feedbackID:a.feedbackId,formattingStyle:b.is_markdown_enabled===!0?"MARKDOWN":"PLAIN_TEXT",inputDecorators:[],inputState:{__type:"lexical-editor-state-based"},isLocked:!1}}function l(a){return Array.from(a).sort(function(a,b){return((a=a.offset)!=null?a:0)-((a=b.offset)!=null?a:0)})}function m(a,b){var c=b.split(/\r?\n/);if(c.length===1){b=d("Lexical").$createTextNode(b);a.append(b)}else{b=c.length;for(var e=0;e<b;e++){var f=c[e];f!==""&&a.append(d("Lexical").$createTextNode(f));e!==b-1&&a.append(d("Lexical").$createLineBreakNode())}}}g["default"]=a}),98);
__d("useCometCreateComposerStateFromCommentData",["CometRelay","unrecoverableViolation","useCometCreateComposerEditorStateFromCommentData","useCometCreateComposerStateFromCommentData_comment.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useCometCreateComposerStateFromCommentData_comment.graphql"),a);if(a==null)throw c("unrecoverableViolation")("Cannot create composer state without comment data on getCometCreateComposerStateFromCommentData","comet_feed");return c("useCometCreateComposerEditorStateFromCommentData")(e,a)}g["default"]=a}),98);